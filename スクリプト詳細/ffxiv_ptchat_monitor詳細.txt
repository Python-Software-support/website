
■ 1. 基本設定

・抽出対象のチャットコード（PT_CODE=000E）を定義

・抽出結果を書き込む保存先ファイルを指定

・ACTログ解析用の正規表現パターンを準備


■ 2. 会話抽出処理（extract）

・ACTログ1行から time / code / name / msg を分解

・PT_CODE と一致する行だけを対象とする

・時刻を「hh:mm:ss」形式に整形

・名前から特殊文字（など）を除去

・「時刻 名前 「メッセージ」」形式の文字列を返す


■ 3. ログ監視処理（LogHandler）

・ACTログの変更イベントのみ処理

・ログ末尾50行を走査し extract() により会話を抽出

・抽出されたメッセージを MSG_LOG に追加

・新しいメッセージを保存先ファイルへ追記


■ 4. 監視開始処理（main）

・ユーザーに ACTログファイルのパス入力を求める

・ファイル存在確認を行い、不正なら終了

・Observer を作成し LogHandler を登録

・監視フォルダを設定して observer.start() で監視開始


■ 5. 終了処理

・コンソールで "end" の入力を待機

・入力が "end" の場合は observer を停止

・join により終了待機し、安全に監視を終了